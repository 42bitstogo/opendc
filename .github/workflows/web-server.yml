name: Web server

on: [push]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   name: Set up Python
                uses: actions/setup-python@v2
                with:
                    python-version: 3.8
            -   name: Install dependencies
                working-directory: web-server
                run: |
                    python -m pip install --upgrade pip
                    pip install -r requirements.txt
            -   name: Lint with pylint
                working-directory: web-server
                run: |
                    ./check.sh
            -   name: Test with pytest
                working-directory: web-server
                run: |
                    pytest opendc
